(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{160:function(e,t,n){},206:function(e,t,n){"use strict";n.r(t);var r,a=n(2),c=n(0),o=n.n(c),i=n(14),u=n.n(i),s=(n(160),n(126)),l=n(135),j=n(11),b=n(20),d=n.n(b),p=n(31),h=n(39),f=n(25),m=n(243),O=n(242),g=n(210),x=n(245),v=n(244),y=n(250),k=n(41),S=n.n(k),C=n(249),w=n(129),I=n.n(w);function N(e,t){return!!e&&(Array.isArray(e)?Array.isArray(t)?e.every((function(e){return t.every((function(t){return e[t]}))})):e.every((function(e){return e[t]})):Array.isArray(t)?t.every((function(t){return e[t]})):e[t])}!function(e){e.SHEILTAS="sheiltas",e.ARTICLES="articles",e.LOGIN="login",e.KEEP_ALIVE="keep-alive",e.SIGNUP="signup",e.USERS="users",e.LOCALES="locales",e.CATEGORIES="categories",e.SUBCATEGORIES="subcategories"}(r||(r={}));var E=I.a.create({baseURL:"/api"}),A={login:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post("/".concat(r.LOGIN),t);case 3:return n=e.sent,a=n.data,localStorage.setItem("token",a),E.defaults.headers.authorization=a,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),keepAlive:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get("/".concat(r.KEEP_ALIVE));case 3:t=e.sent,n=t.data,localStorage.setItem("token",n),E.defaults.headers.authorization="Bearer ".concat(n),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.log("e",e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},L=function(e){var t=localStorage.getItem("token");if(t)return e.defaults.headers.authorization="Bearer ".concat(t),e;throw Error("No token")};function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publicApi:{get:!1,delete:!1,post:!1,put:!1}},n=t.publicApi;return{name:e,get:function(){var t=Object(p.a)(d.a.mark((function t(r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.get||L(E),t.next=4,E.get("/".concat(e),{params:r});case 4:return t.abrupt("return",t.sent.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),post:function(){var t=Object(p.a)(d.a.mark((function t(r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.post||L(E),t.next=4,E.post("".concat(e),r);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}var M=P(r.ARTICLES),T=P(r.LOCALES,{publicApi:{get:!0}}),B=P(r.CATEGORIES),F=["he","en"],R=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return{e:t}}},G=Object(c.createContext)({locale:{},setSelectedLanguage:function(){},selectedLanguage:"he",login:function(){return Promise.resolve(!1)},user:{fullName:"",username:""}}),D=function(e){var t=e.children,n=Object(c.useState)({fullName:"",username:""}),r=Object(h.a)(n,2),o=r[0],i=r[1],u=Object(c.useState)("he"),s=Object(h.a)(u,2),l=s[0],j=s[1],b=Object(c.useState)(F.reduce((function(e,t){return e[t]={},e}),{})),f=Object(h.a)(b,2),m=f[0],O=f[1];Object(C.a)(T.name,T.get,{onSuccess:function(e){O(e.reduce((function(e,t){var n=t.key,r=t.translation;return Object.entries(r).forEach((function(t){var r=Object(h.a)(t,2),a=r[0],c=r[1];e[a][n]=c})),e}),F.reduce((function(e,t){return e[t]={},e}),{})))}});var g=Object(c.useMemo)((function(){return m[l]}),[l,m]);Object(c.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=R(e),n=t.username,r=t.fullName;i({username:n,fullName:r})}}),[]);var x=Object(c.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.login(t);case 2:if("string"!==typeof(n=e.sent)){e.next=11;break}if(r=R(n),a=r.username,c=r.fullName,!a||!c){e.next=10;break}return i({username:a,fullName:c}),e.abrupt("return",!0);case 10:case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.jsx)(G.Provider,{value:{locale:g,setSelectedLanguage:j,selectedLanguage:l,login:x,user:o},children:t})},W=Object(c.memo)(D),z=function(){return Object(c.useContext)(G)},J=n(241),U=S()((function(e){return{appBar:{backgroundColor:e.palette.background.paper,height:"100px",justifyContent:"center",top:"0"}}})),V=function(){var e=U(),t=z().selectedLanguage;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{height:"130px"}),Object(a.jsx)(J.a,{position:"fixed",className:e.appBar,children:Object(a.jsxs)(O.a,{variant:"h1",align:"center",color:"secondary",children:["he"===t&&"!","Sheilta`S","he"!==t&&"!"]})})]})},_=Object(c.memo)(V),q=S()((function(e){return{container:{height:"100%"},formContainer:{minWidth:"300px",minHeight:"200px"},form:{padding:"30px",gridGap:e.spacing(2)},button:{borderRadius:"30px",width:"100%",top:"12px"}}})),H=function(){var e=q(),t=Object(j.g)(),n=Object(c.useState)(!1),r=Object(h.a)(n,2),o=r[0],i=r[1],u=z(),s=u.locale,l=u.login,b=Object(c.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(n);case 2:e.sent?t.push("/editor"):i(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,l]);return Object(a.jsxs)(m.a,{container:!0,justify:"center",alignItems:"center",className:e.container,item:!0,xs:!0,children:[Object(a.jsx)(_,{}),Object(a.jsx)(g.a,{elevation:3,className:e.formContainer,children:Object(a.jsxs)(m.a,{container:!0,item:!0,justify:"center",alignItems:"center",className:e.formContainer,direction:"column",children:[o&&Object(a.jsx)(O.a,{children:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9 \u05d0\u05d5 \u05e1\u05d9\u05e1\u05de\u05d0 \u05e9\u05d2\u05d5\u05d9\u05d9\u05dd"}),Object(a.jsx)(f.c,{initialValues:{username:"",password:""},onSubmit:b,children:function(t){var n=t.handleChange;return Object(a.jsxs)(m.a,{component:f.b,container:!0,direction:"column",className:e.form,children:[Object(a.jsx)(f.a,{onChange:n,name:"username",as:v.a,label:s.username,variant:"outlined"}),Object(a.jsx)(f.a,{onChange:n,name:"password",as:v.a,label:s.password,type:"password",variant:"outlined"}),Object(a.jsx)(m.a,{container:!0,justify:"center",children:Object(a.jsx)(m.a,{component:y.a,position:"absolute",item:!0,xs:7,children:Object(a.jsx)(x.a,{type:"submit",variant:"contained",color:"primary",className:e.button,children:s.login})})})]})}})]})})]})},K=n(215),Q=n(251),Y=n(213),X=n(218),Z=n(214),$=n(134),ee=n.n($),te=n(246),ne=S()((function(e){return{appBar:{backgroundColor:e.palette.background.paper,minHeight:"70px",marginBottom:"30px"},paper:{padding:"30px"},input:{backgroundColor:e.palette.background.default}}})),re=Object(c.memo)((function(e){var t=e.data,n=ne(),r=t.label,o=t.name,i=t.options,u=Object(f.d)(),s=u.handleChange,l=u.errors,j=u.touched,b=Object(c.useMemo)((function(){return j[o]&&l[o]}),[l,o,j]);return Object(a.jsxs)(Y.a,{variant:"outlined",fullWidth:!0,children:[Object(a.jsx)(X.a,{children:Object(a.jsx)(O.a,{children:r})}),Object(a.jsx)(f.a,{name:o,label:r,as:K.a,onChange:s,error:b,MenuProps:{disablePortal:!0},inputProps:{className:n.input},children:i.map((function(e){var t=e.value,n=e.name;return Object(a.jsx)(Q.a,{value:t,children:Object(a.jsx)(O.a,{children:n})},t)}))}),Object(a.jsx)(Z.a,{error:!!b,children:b})]})})),ae=function(){var e=Object(f.d)(),t=e.handleChange,n=e.values,r=e.errors,o=e.touched,i=z().locale,u=ne(),s=n.category,l=function(){var e=z().locale;return function(t){return{value:t._id,name:e[t.name.key]}}}(),j=Object(C.a)(B.name,B.get).data,b=Object(c.useMemo)((function(){var e;return[{label:i.category,name:"category",options:(null===j||void 0===j?void 0:j.map(l))||[]},{label:i.subcategory,name:"subcategory",options:(null===j||void 0===j||null===(e=j.find((function(e){return e._id===s})))||void 0===e?void 0:e.subcategories.map(l))||[]}]}),[j,s,i.category,i.subcategory,l]),d=ee()(),p=Object(te.a)(d.breakpoints.down("md")),h=Object(c.useMemo)((function(){return p?5:10}),[p]);return Object(a.jsx)(m.a,{container:!0,component:f.b,children:Object(a.jsxs)(m.a,{container:!0,children:[Object(a.jsx)(m.a,{component:y.a,container:!0,my:1,children:Object(a.jsx)(f.a,{name:"title",as:v.a,onChange:t,label:i.articleName,variant:"outlined",fullWidth:!0,helperText:o.title&&r.title,error:r.title&&o.title,InputProps:{className:u.input}})}),b.map((function(e){return Object(a.jsx)(m.a,{container:!0,component:y.a,my:1,children:Object(a.jsx)(re,{data:e})},e.name)})),Object(a.jsx)(m.a,{container:!0,component:y.a,my:1,children:Object(a.jsx)(f.a,{name:"content",as:v.a,multiline:!0,onChange:t,label:i.content,variant:"outlined",fullWidth:!0,rows:h,helperText:o.content&&r.content,error:r.content&&o.content,InputProps:{className:u.input}})}),Object(a.jsx)(x.a,{variant:"contained",color:"secondary",type:"submit",children:Object(a.jsx)(O.a,{children:i.upload})})]})})},ce=function(){var e=ne(),t=z().locale,n=Object(j.g)(),r=Object(c.useMemo)((function(){return{title:"",category:"",subcategory:"",content:""}}),[]),o=Object(c.useCallback)((function(){n.push("/contents")}),[n]),i=Object(c.useCallback)((function(e){return Object.entries(e).reduce((function(e,n){var r=Object(h.a)(n,2),a=r[0];return r[1]||"subcategory"===a||(e[a]=t.requiredField),e}),{})}),[t.requiredField]),u=Object(c.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N(n,["content","category"])){e.next=5;break}return e.next=3,M.post(n);case 3:r=e.sent,alert("string"!==typeof r?t.articleAddedSuccessfully:t.serverError);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t.articleAddedSuccessfully,t.serverError]);return Object(a.jsxs)(m.a,{container:!0,justify:"center",alignItems:"center",children:[Object(a.jsx)(_,{}),Object(a.jsxs)(y.a,{className:e.paper,component:g.a,width:"100%",mx:2,children:[Object(a.jsxs)(m.a,{container:!0,alignItems:"center",justify:"space-between",children:[Object(a.jsxs)(O.a,{children:[" ",t.editorPageTitle,":"]}),Object(a.jsx)(x.a,{variant:"contained",onClick:o,color:"primary",children:Object(a.jsx)(O.a,{children:t.toContentsPage})})]}),Object(a.jsx)(f.c,{validate:i,initialValues:r,onSubmit:u,children:Object(a.jsx)(ae,{})})]})]})},oe=Object(c.memo)(ce),ie=function(e){var t=e.children,n=e.path;return Object(c.useMemo)((function(){var e=localStorage.getItem("token");if(e)try{var t=JSON.parse(atob(e.split(".")[1])).exp;return!!t&&1e3*t>Date.now()}catch(n){return localStorage.removeItem("token"),!1}return!1}),[])?"/"===n?Object(a.jsx)(j.a,{to:"/editor"}):Object(a.jsx)(j.b,{path:n,children:t}):Object(a.jsx)(j.a,{to:"/"})},ue=Object(c.memo)(ie),se=function(){var e=Object(C.a)([M.name,{}],M.get).data,t=z().locale;return Object(a.jsxs)(m.a,{children:[Object(a.jsx)(_,{}),(null===e||void 0===e?void 0:e.length)&&e.map((function(e){var n=e.author,r=e.title,c=e.content,o=e.category,i=e.subcategory,u=e.updatedAt,s=(N(n,"fullName")?n:{}).fullName,l=new Date(u.toString()),j="".concat(l.getDate(),"/").concat(l.getMonth()+1,"/").concat(l.getFullYear());return N(o,"name")&&Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(m.a,{container:!0,alignItems:"baseline",children:[Object(a.jsx)(O.a,{variant:"h2",children:r}),Object(a.jsxs)(O.a,{variant:"subtitle1",children:[" | ",j]})]}),Object(a.jsx)(O.a,{variant:"subtitle1",children:"".concat(t.category,": ").concat(t[o.name.key])}),i&&Object(a.jsx)(O.a,{variant:"subtitle1",children:"".concat(t.subcategory,": ").concat(t[i.name.key])}),Object(a.jsx)(O.a,{variant:"subtitle1",children:"".concat(t.author,": ").concat(s)}),Object(a.jsx)(O.a,{children:c})]},r)}))]})},le=Object(c.memo)(se),je=function(){return Object(a.jsx)(l.a,{children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/",exact:!0,children:Object(a.jsx)(H,{})}),Object(a.jsx)(ue,{path:"/editor",children:Object(a.jsx)(oe,{})}),Object(a.jsx)(ue,{path:"/contents",children:Object(a.jsx)(le,{})})]})})},be=Object(c.memo)(je),de=S()((function(e){return{container:{backgroundColor:e.palette.background.default,height:"100vh"}}})),pe=function(e){var t=e.children,n=de();return Object(a.jsx)(m.a,{container:!0,direction:"column",className:n.container,children:t})},he=Object(c.memo)(pe),fe=n(138),me=n(247),Oe=n(240),ge=n(17),xe=n(136),ve=n.n(xe),ye=n(140),ke=n(65),Se=n(137),Ce=n.n(Se),we=n(99),Ie=n.n(we),Ne=Object(ge.c)({plugins:[].concat(Object(fe.a)(Object(ye.a)().plugins),[ve()()])}),Ee=Ie()({background:{default:"#fff8ed",paper:"#ffedcf"},primary:{main:"#b49a6f",light:"#cebda1",dark:"#a28453"},secondary:{main:"#1f3c64",light:"#4e6692",dark:"#001739"},text:{primary:"#061324"}}),Ae=function(e){var t=e.children,n=z().selectedLanguage,r=Object(c.useMemo)((function(){return"he"===n?"rtl":"ltr"}),[n]),o=Object(c.useMemo)((function(){return Ce()(Object(me.a)({palette:Ee,overrides:{MuiInputBase:{root:{backgroundColor:Ee.background.default}},MuiButton:{root:{textTransform:"capitalize",color:Ee.background.default}}},direction:r}))}),[r]);return Object(a.jsx)(Oe.a,{theme:o,children:Object(a.jsx)(ke.b,{jss:Ne,children:Object(a.jsx)("div",{dir:r,children:t})})})},Le=Object(c.memo)(Ae),Pe=n(248),Me=n(130),Te=new Pe.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),Be=function(){return Object(a.jsx)(Me.a,{client:Te,children:Object(a.jsxs)(W,{children:[Object(a.jsx)(s.ReactQueryDevtools,{position:"bottom-left",initialIsOpen:!1}),Object(a.jsx)(Le,{children:Object(a.jsx)(he,{children:Object(a.jsx)(be,{})})})]})})},Fe=Object(c.memo)(Be),Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};u.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(Fe,{})}),document.getElementById("root")),Re()}},[[206,1,2]]]);
//# sourceMappingURL=main.73f61204.chunk.js.map